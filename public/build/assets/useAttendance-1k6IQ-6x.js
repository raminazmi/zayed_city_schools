import{j as o,u as y,r as i,a as j}from"./app-DrYGkpmb.js";import{P as m}from"./PrimaryButton-CHSvh-7U.js";function C({title:s,onReset:a,onSave:c,translations:n,isDark:l}){return o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:`text-2xl sm:text-3xl  mt-3 font-bold text-primaryColor ${l?"text-TextLight":"text-TextDark"}`,children:s}),o.jsxs("div",{className:"flex justify-between gap-4 px-4 ",children:[o.jsx(m,{onClick:a,className:"!bg-gray-400 hover:!bg-gray-500",children:n.reset_attendance}),o.jsx(m,{onClick:c,children:n.save_attendance})]})]})}function u({studentId:s,currentStatus:a,onChange:c,translations:n}){const l=y(e=>e.theme.darkMode==="dark"),[d,g]=i.useState(""),h=[{value:"present",colorClass:"bg-green-500 hover:bg-green-600"},{value:"absent",colorClass:"bg-red-500 hover:bg-red-600"},{value:"late",colorClass:"bg-yellow-500 hover:bg-yellow-600"}],x=e=>{c(s,e==="late"?{status:e,lateTime:d}:e)},f=e=>{g(e.target.value),c(s,{status:"late",lateTime:e.target.value})},t=e=>{const r=typeof a=="object"?a.status===e:a===e,p=h.find(b=>b.value===e);return`px-3 py-1 rounded transition-colors ${r?p.colorClass+" text-white":`${l?"bg-[#343438]":"bg-gray-200 hover:bg-gray-300"}  `}`};return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("div",{className:"flex gap-4",children:h.map(({value:e})=>o.jsx("button",{className:t(e),onClick:()=>x(e),children:n[e]},e))}),typeof a=="object"&&(a==null?void 0:a.status)==="late"&&o.jsx("input",{type:"time",placeholder:n.enter_late_time,value:d,onChange:f,className:`${l?"bg-[#343438]":""} mt-2 px-3 py-1 border rounded`})]})}function N(s,a){const[c,n]=i.useState({}),[l,d]=i.useState(!1);return i.useEffect(()=>{const t={};s.forEach(e=>{t[e.id]=""}),n(t)},[s]),{attendance:c,handleAttendanceChange:(t,e)=>{n(r=>({...r,[t]:e}))},resetAttendance:()=>{const t={};s.forEach(e=>{t[e.id]=""}),n(t)},fetchAttendance:async()=>{d(!0);try{const t=await j.get(a);if(t.data&&t.data.attendance){const e={};s.forEach(r=>{e[r.id]=t.data.attendance[r.id]||""}),n(e)}}catch(t){console.error("Failed to fetch attendance:",t)}finally{d(!1)}},isLoading:l,pleaseFillAllAttendance:()=>Object.values(c).every(t=>t!=="")}}export{u as A,C as a,N as u};
