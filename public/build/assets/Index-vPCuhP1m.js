import{r as c,u as d,j as e,S as N,A as m}from"./app-DrYGkpmb.js";import{A as D}from"./AuthenticatedLayout-DH1WOUyn.js";import{B as S}from"./Breadcrumb-D-yvS0r1.js";import{D as k}from"./DataTable-DNMqza36.js";import{t as A}from"./index-CfQLVbGg.js";import{u as C}from"./index-B_FvpBn_.js";import"./ApplicationLogo-D0gAqrgm.js";import"./transition-pEnpc1Cw.js";function M({auth:u,classes:p}){const[a,r]=c.useState(!1),[n,l]=c.useState(null);d(s=>s.theme.darkMode==="dark");const x=d(s=>s.language.current),t=A[x],b=[{label:t.student_management,href:"/admin/dashboard/students"},{label:t.classes,href:"/admin/dashboard/classes"},{label:t.list}],h=[{key:"class_name",label:t.class_name,sortable:!0},{key:"students_count",label:t.numbers_of_students,sortable:!0},{key:"teacher_name",label:t.teacher_name,sortable:!0}],f=p.map(s=>({id:s.id,class_name:s.class_name,students_count:s.students_count,teacher_name:s.teacher_name})),g=s=>{m.visit(`/admin/dashboard/students/${s.id}/view`)},j=async s=>{try{r(!0),l(null);const o=s[0],i=new FormData;i.append("file",o),m.post("/admin/dashboard/students/import",i,{forceFormData:!0,onSuccess:()=>{r(!1),window.location.reload()},onError:w=>{r(!1),l(w.file||"حدث خطأ أثناء رفع الملف")},onFinish:()=>{r(!1)}})}catch(o){r(!1),l("حدث خطأ غير متوقع"),console.error("خطأ:",o)}},{getRootProps:v,getInputProps:_,isDragActive:y}=C({accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},onDrop:j,multiple:!1,disabled:a});return e.jsxs(D,{user:u.user,children:[e.jsx(N,{title:t.student_management}),e.jsx("div",{className:"flex",style:{height:"calc(100vh - 66px)"},children:e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"mx-auto px-4 sm:px-6 md:px-14",children:[e.jsx(S,{items:b}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl  mt-3 font-bold text-primaryColor",children:t.classes}),e.jsx("div",{className:"relative",children:e.jsxs("div",{...v(),className:`cursor-pointer
                                            ${y?"border-blue-500 bg-blue-50":"border-gray-300"}
                                            ${a?"opacity-50 cursor-not-allowed":""}
                                        `,children:[e.jsx("input",{..._()}),e.jsx("button",{type:"button",disabled:a,className:`bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md
                                                ${a?"opacity-50 cursor-not-allowed":""}
                                            `,children:a?"جاري الرفع...":t.import_students}),n&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n})]})})]})]}),e.jsx("div",{className:"mx-auto px-4 sm:px-6 md:px-8 mt-6",children:e.jsx(k,{columns:h,data:f,searchable:!0,filterable:!1,selectable:!1,actions:!1,buttons:[{label:t.veiw,onClick:g,bgColor:"bg-blue-500",hoverColor:"hover:bg-green-600",ringColor:"ring-blue-500",show:s=>s}]})})]})})})]})}export{M as default};
