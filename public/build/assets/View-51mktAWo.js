import{u as l,j as a,S as k,A as N,R as C}from"./app-DrYGkpmb.js";import{A as S}from"./AuthenticatedLayout-DH1WOUyn.js";import{B as $}from"./Breadcrumb-D-yvS0r1.js";import{D as v}from"./DataTable-DNMqza36.js";import{t as M}from"./index-CfQLVbGg.js";import{P as i}from"./PrimaryButton-CHSvh-7U.js";import{M as A,g as D}from"./message-circle-reply-DwqZ9db1.js";import{h as c}from"./moment-DSbgDjSZ.js";import{L as T}from"./index-C0CEYPt1.js";import"./ApplicationLogo-D0gAqrgm.js";import"./transition-pEnpc1Cw.js";import"./createLucideIcon-Cji15OyS.js";function z({auth:p,classroom:n,attendance:m,date:o}){l(e=>e.theme.darkMode==="dark");const u=l(e=>e.language.current),t=M[u],h={Sunday:t.Sunday,Monday:t.Monday,Tuesday:t.Tuesday,Wednesday:t.Wednesday,Thursday:t.Thursday,Friday:t.Friday,Saturday:t.Saturday},s=c(o).format("YYYY-MM-DD"),d=h[c(o).format("dddd")],x=[{key:"student_name",label:t.student_name,sortable:!0},{key:"status",label:t.attendance_status,sortable:!0},{key:"notes",label:t.notes,sortable:!1},{key:"parent_whatsapp",label:t.parent_whatsapp,sortable:!1}],b=e=>{switch(e){case"present":return"bg-green-500 text-white";case"late":return"bg-yellow-500 text-white";case"absent":return"bg-red-500 text-white";case"not_taken":return"bg-gray-400 text-white";default:return""}},g=()=>{N.visit(`/teacher/dashboard/attendance/${n.id}/attendance?date=${s}`)},y=()=>{window.location.href=`/teacher/dashboard/attendance/${n.id}/export?date=${s}`},f=m.map(e=>({id:e.student_id,student_name:e.student_name||t.unknown_student,status:a.jsx("span",{className:`px-2 py-1 rounded ${b(e.status)}`,children:e.status==="not_taken"?t.attendance_not_taken:t[e.status]}),notes:e.notes||"-",parent_whatsapp:e.parent_whatsapp||""})),_=[{label:t.attendance,href:"/teacher/dashboard/attendance"},{label:n.name}],w=e=>{const r=C.Children.toArray(e.status.props.children).join(" ");if(e.parent_whatsapp){const j=D(r,e.student_name,s,e.notes);return`https://api.whatsapp.com/send?phone=${e.parent_whatsapp}&text=${encodeURIComponent(j)}`}return"#"};return a.jsxs(S,{user:p.user,children:[a.jsx(k,{title:`${d} - ${s}`}),a.jsx(T,{}),a.jsx("div",{className:"flex",style:{height:"calc(100vh - 66px)"},children:a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"py-6",children:[a.jsxs("div",{className:"mx-auto px-4 sm:px-6 md:px-14",children:[a.jsx($,{items:_}),a.jsxs("div",{className:"flex justify-between gap-2 px-4",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl  mt-3 font-bold text-primaryColor",children:`${d} (${s})`}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(i,{className:"mt-4 !bg-green-500 text-white px-4 py-2 rounded !ring-green-500",onClick:y,children:t.export_to_Excel}),a.jsx(i,{className:"mt-4 text-white px-4 py-2 rounded",onClick:g,children:t.edit_attendance})]})]})]}),a.jsx("div",{className:"mx-auto px-4 sm:px-6 md:px-14 mt-6",children:a.jsx(v,{columns:x,data:f,searchable:!1,filterable:!1,selectable:!1,actions:!1,buttons:[{label:t.send_whatsapp,onClick:e=>{const r=w(e);window.open(r,"_blank")},icon:a.jsx(A,{className:"w-4 h-4 mx-1"}),bgColor:"bg-green-500",hoverColor:"bg-green-500",ringColor:"ring-green-500",show:e=>![t.attendance_not_taken,t.present].includes(e.status.props.children)}]})})]})})})]})}export{z as default};
